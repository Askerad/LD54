[gd_scene load_steps=15 format=3 uid="uid://cs857txywttq7"]

[ext_resource type="Script" path="res://levels/level.gd" id="1_ewje7"]
[ext_resource type="Script" path="res://levels/LoadingManager.gd" id="2_ju7ym"]
[ext_resource type="PackedScene" uid="uid://bwkepyp35k2f2" path="res://Characters/Player/player.tscn" id="3_fxhom"]
[ext_resource type="Script" path="res://levels/Trailing Camera.gd" id="4_lpwh4"]
[ext_resource type="PackedScene" uid="uid://pffdk3w3fuyk" path="res://wall_manager.tscn" id="5_epft5"]
[ext_resource type="Theme" uid="uid://d18fwmx6upccw" path="res://UITheme.tres" id="6_2g68s"]
[ext_resource type="Script" path="res://levels/Label.gd" id="6_50hv7"]
[ext_resource type="Texture2D" uid="uid://b5md7j2v6insp" path="res://assets/ui/ninerect.png" id="7_be044"]
[ext_resource type="Script" path="res://levels/ScoreManager.gd" id="7_vqgtj"]
[ext_resource type="FontFile" uid="uid://dvn0jky26ws8p" path="res://assets/fonts/Kenney Rocket Square.ttf" id="9_dy05l"]
[ext_resource type="Texture2D" uid="uid://bksaw334o77tq" path="res://assets/vfx/fondnoir.png" id="9_r6mpr"]
[ext_resource type="Script" path="res://levels/KillBox.gd" id="12_y2hjn"]
[ext_resource type="AudioStream" uid="uid://5qiuscokysgn" path="res://assets/sfx/falling.wav" id="13_ge8gf"]

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_s2myn"]
distance = -360.0

[node name="level" type="Node2D"]
process_mode = 3
texture_filter = 1
position = Vector2(640, 360)
script = ExtResource("1_ewje7")

[node name="LoadingManager" type="Node2D" parent="."]
process_mode = 1
position = Vector2(0, 360)
script = ExtResource("2_ju7ym")

[node name="WallManager" parent="." instance=ExtResource("5_epft5")]
process_mode = 1
position = Vector2(-224, 800)
rotation = 1.88146
speed = 25.0

[node name="CharacterBody2D" parent="." instance=ExtResource("3_fxhom")]
process_mode = 1
position = Vector2(0, 280)

[node name="Camera2D" type="Camera2D" parent="CharacterBody2D"]
position = Vector2(0, -280)
limit_left = 0
limit_right = 1280
limit_bottom = 720
position_smoothing_enabled = true
drag_vertical_enabled = true
drag_top_margin = 0.5
script = ExtResource("4_lpwh4")

[node name="UiCanvas" type="CanvasLayer" parent="CharacterBody2D/Camera2D"]
layer = 128

[node name="Label" type="Label" parent="CharacterBody2D/Camera2D/UiCanvas" node_paths=PackedStringArray("scoreManager")]
texture_filter = 1
offset_left = 16.0
offset_right = 216.0
offset_bottom = 53.0
theme = ExtResource("6_2g68s")
text = "36040"
script = ExtResource("6_50hv7")
scoreManager = NodePath("../../../../ScoreManager")

[node name="Fondnoir" type="Sprite2D" parent="CharacterBody2D/Camera2D/UiCanvas"]
visible = false
modulate = Color(1, 1, 1, 0.560784)
position = Vector2(640, 360)
texture = ExtResource("9_r6mpr")

[node name="GameOverScreen" type="CanvasLayer" parent="CharacterBody2D/Camera2D/UiCanvas"]
process_mode = 3
layer = 128
visible = false
scale = Vector2(2, 2)
transform = Transform2D(2, 0, 0, 2, 0, 0)

[node name="NinePatchRect" type="NinePatchRect" parent="CharacterBody2D/Camera2D/UiCanvas/GameOverScreen"]
offset_left = 184.0
offset_top = 132.0
offset_right = 456.0
offset_bottom = 220.0
texture = ExtResource("7_be044")
patch_margin_left = 6
patch_margin_top = 6
patch_margin_right = 6
patch_margin_bottom = 6
axis_stretch_horizontal = 1
axis_stretch_vertical = 1

[node name="Label2" type="Label" parent="CharacterBody2D/Camera2D/UiCanvas/GameOverScreen/NinePatchRect" node_paths=PackedStringArray("scoreManager")]
texture_filter = 1
layout_mode = 0
offset_left = 12.0
offset_top = 40.0
offset_right = 212.0
offset_bottom = 93.0
theme = ExtResource("6_2g68s")
theme_override_font_sizes/font_size = 32
text = "36040"
script = ExtResource("6_50hv7")
scoreManager = NodePath("../../../../../../ScoreManager")

[node name="Button" type="Button" parent="CharacterBody2D/Camera2D/UiCanvas/GameOverScreen/NinePatchRect"]
texture_filter = 1
layout_mode = 0
offset_left = 184.0
offset_top = 52.0
offset_right = 262.0
offset_bottom = 73.0
theme_override_fonts/font = ExtResource("9_dy05l")
theme_override_font_sizes/font_size = 10
text = "RESTART"

[node name="ScoreManager" type="Node" parent="." node_paths=PackedStringArray("player")]
process_mode = 1
script = ExtResource("7_vqgtj")
player = NodePath("../CharacterBody2D")

[node name="KillBox" type="Area2D" parent="." node_paths=PackedStringArray("targetCamera")]
script = ExtResource("12_y2hjn")
targetCamera = NodePath("../CharacterBody2D/Camera2D")

[node name="CollisionShape2D" type="CollisionShape2D" parent="KillBox"]
position = Vector2(0, 8)
shape = SubResource("WorldBoundaryShape2D_s2myn")
debug_color = Color(0.811765, 0.0823529, 0, 0.419608)

[node name="FallingSFX" type="AudioStreamPlayer" parent="."]
stream = ExtResource("13_ge8gf")
volume_db = -12.023

[connection signal="player_died" from="CharacterBody2D" to="." method="_on_played_died"]
[connection signal="pressed" from="CharacterBody2D/Camera2D/UiCanvas/GameOverScreen/NinePatchRect/Button" to="." method="_on_restart_button_pressed"]
[connection signal="body_entered" from="KillBox" to="." method="_on_kill_box_body_entered"]
